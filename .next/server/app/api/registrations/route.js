"use strict";(()=>{var e={};e.id=9070,e.ids=[9070],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},51658:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>u});var a=r(49303),o=r(88716),i=r(60670),n=r(87070),p=r(85662);async function u(e){try{let t=await e.formData(),r=t.get("teamName"),s=JSON.parse(t.get("teamLeader")),a=JSON.parse(t.get("teamMembers")),o=JSON.parse(t.get("selectedModule")),i=t.get("paymentMethod"),u=t.get("transactionId"),d=t.get("paymentProof"),c=`TECH${Math.floor(1e4+9e4*Math.random())}`,l=null;if(d&&d.size>0){let e=`${c}_${Date.now()}_${d.name}`,{data:t,error:r}=await p.R.storage.from("payment-proofs").upload(e,d);if(r)return n.NextResponse.json({error:"Failed to upload payment proof"},{status:500});l=t.path}let{data:m,error:g}=await p.R.from("registrations").insert([{tech_id:c,team_name:r,leader:s,members:a,module:o.id,status:"pending",payment_method:i,transaction_id:u,payment_proof:l}]).select().single();if(g)return n.NextResponse.json({error:g.message},{status:500});return n.NextResponse.json({success:!0,registration:m,techId:c,message:"Registration submitted successfully!"})}catch(e){return console.error("Registration error:",e),n.NextResponse.json({error:e.message||"Registration failed"},{status:500})}}async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("status"),s=t.get("module"),a=p.R.from("registrations").select("*");r&&(a=a.eq("status",r)),s&&(a=a.eq("module",s));let{data:o,error:i}=await a.order("created_at",{ascending:!1});if(i)return n.NextResponse.json({error:i.message},{status:500});return n.NextResponse.json({registrations:o})}catch(e){return n.NextResponse.json({error:e.message||"Failed to fetch registrations"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/registrations/route",pathname:"/api/registrations",filename:"route",bundlePath:"app/api/registrations/route"},resolvedPagePath:"/Users/macbookpro/Personal Work/tecverse03/app/api/registrations/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:g}=c,x="/api/registrations/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},85662:(e,t,r)=>{r.d(t,{R:()=>n,_:()=>i});var s=r(43974);let a="https://xplcgqfweqzliiwchmqw.supabase.co",o=process.env.SUPABASE_SERVICE_ROLE_KEY||"",i=(0,s.eI)(a,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhwbGNncWZ3ZXF6bGlpd2NobXF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0Njc4MTAsImV4cCI6MjA3NzA0MzgxMH0.llyAt2gPKx7ARwyigyqVk77xuG267nBGdd0WxgOaCPQ"),n=(0,s.eI)(a,o,{auth:{persistSession:!1}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,3974],()=>r(51658));module.exports=s})();