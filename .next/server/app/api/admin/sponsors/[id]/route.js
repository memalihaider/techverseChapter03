"use strict";(()=>{var e={};e.id=9293,e.ids=[9293],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},92349:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var o={};s.r(o),s.d(o,{DELETE:()=>l,PUT:()=>p});var t=s(49303),n=s(88716),a=s(60670),i=s(87070),u=s(3360);async function p(e,{params:r}){try{let s=e.cookies.get("admin_session")?.value;if(!s)return i.NextResponse.json({error:"Unauthorized"},{status:401});let o=JSON.parse(Buffer.from(s,"base64").toString()),{id:t}=r,{name:n,logo_emoji:a,description:p,website:l,tier:d,is_active:c}=await e.json(),{data:m}=await u.pR.from("sponsors").select("*").eq("id",t).single(),{data:f,error:g}=await u.pR.from("sponsors").update({name:n,logo_emoji:a,description:p,website:l,tier:d,tier_order:{Platinum:1,Gold:2,Silver:3,Bronze:4}[d]||3,is_active:c}).eq("id",t).select().single();if(g)return console.error("Error updating sponsor:",g),i.NextResponse.json({error:"Failed to update sponsor"},{status:500});return await (0,u.ag)(o.id,"UPDATE","sponsors",t,m,f),i.NextResponse.json({success:!0,sponsor:f})}catch(e){return console.error("Update sponsor error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}async function l(e,{params:r}){try{let s=e.cookies.get("admin_session")?.value;if(!s)return i.NextResponse.json({error:"Unauthorized"},{status:401});let o=JSON.parse(Buffer.from(s,"base64").toString()),{id:t}=r,{data:n}=await u.pR.from("sponsors").select("*").eq("id",t).single(),{error:a}=await u.pR.from("sponsors").delete().eq("id",t);if(a)return console.error("Error deleting sponsor:",a),i.NextResponse.json({error:"Failed to delete sponsor"},{status:500});return await (0,u.ag)(o.id,"DELETE","sponsors",t,n,null),i.NextResponse.json({success:!0,message:"Sponsor deleted successfully"})}catch(e){return console.error("Delete sponsor error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}let d=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/sponsors/[id]/route",pathname:"/api/admin/sponsors/[id]",filename:"route",bundlePath:"app/api/admin/sponsors/[id]/route"},resolvedPagePath:"/Users/macbookpro/Personal Work/tecverse03/app/api/admin/sponsors/[id]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:f}=d,g="/api/admin/sponsors/[id]/route";function x(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},3360:(e,r,s)=>{s.d(r,{ag:()=>p,pR:()=>a,v9:()=>u});var o=s(43974),t=s(42023);let n=process.env.SUPABASE_SERVICE_ROLE_KEY,a=(0,o.eI)("https://xplcgqfweqzliiwchmqw.supabase.co",n);async function i(e,r){return t.compare(e,r)}async function u(e,r){try{let{data:s,error:o}=await a.from("admin_users").select("*").eq("email",e).eq("is_active",!0).single();if(o||!s||!await i(r,s.password_hash))return null;await a.from("admin_users").update({last_login:new Date().toISOString()}).eq("id",s.id);let{password_hash:t,...n}=s;return n}catch(e){return console.error("Authentication error:",e),null}}async function p(e,r,s,o=null,t=null,n=null){try{await a.from("activity_logs").insert({admin_id:e,action:r,table_name:s,record_id:o,old_values:t,new_values:n})}catch(e){console.error("Activity log error:",e)}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),o=r.X(0,[8948,5972,3974,2023],()=>s(92349));module.exports=o})();