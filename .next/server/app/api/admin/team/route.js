"use strict";(()=>{var e={};e.id=3585,e.ids=[3585],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},53489:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>_,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p});var s={};t.r(s),t.d(s,{GET:()=>c,POST:()=>m});var o=t(49303),a=t(88716),n=t(60670),i=t(87070),u=t(3360);async function c(e){try{if(!e.cookies.get("admin_session")?.value)return i.NextResponse.json({error:"Unauthorized"},{status:401});let{data:r,error:t}=await u.pR.from("team_members").select("*").order("hierarchy_order",{ascending:!0}).order("display_order",{ascending:!0});if(t)return console.error("Error fetching team members:",t),i.NextResponse.json({error:"Failed to fetch team members"},{status:500});return i.NextResponse.json({success:!0,members:r||[]})}catch(e){return console.error("Team members fetch error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}async function m(e){try{let r=e.cookies.get("admin_session")?.value;if(!r)return i.NextResponse.json({error:"Unauthorized"},{status:401});let t=JSON.parse(Buffer.from(r,"base64").toString()),{name:s,position:o,department:a,hierarchy:n,avatar_emoji:c,bio:m,is_active:d,is_featured:l}=await e.json();if(!s||!o||!a||!n||!m)return i.NextResponse.json({error:"Missing required fields"},{status:400});let{data:p,error:f}=await u.pR.from("team_members").insert({name:s,position:o,department:a,hierarchy:n,hierarchy_order:{Organizers:1,Directors:2,"Co-Directors":3,Supervisors:4,Leads:5,"Team Members":6,Volunteers:7}[n]||6,avatar_emoji:c||"\uD83D\uDC64",bio:m,is_active:void 0===d||d,is_featured:l||!1,created_by:t.id,social_links:{}}).select().single();if(f)return console.error("Error creating team member:",f),i.NextResponse.json({error:"Failed to create team member"},{status:500});return await (0,u.ag)(t.id,"CREATE","team_members",p.id,null,p),i.NextResponse.json({success:!0,member:p})}catch(e){return console.error("Create team member error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/admin/team/route",pathname:"/api/admin/team",filename:"route",bundlePath:"app/api/admin/team/route"},resolvedPagePath:"/Users/macbookpro/Personal Work/tecverse03/app/api/admin/team/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:f}=d,h="/api/admin/team/route";function _(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},3360:(e,r,t)=>{t.d(r,{ag:()=>c,pR:()=>n,v9:()=>u});var s=t(43974),o=t(42023);let a=process.env.SUPABASE_SERVICE_ROLE_KEY,n=(0,s.eI)("https://xplcgqfweqzliiwchmqw.supabase.co",a);async function i(e,r){return o.compare(e,r)}async function u(e,r){try{let{data:t,error:s}=await n.from("admin_users").select("*").eq("email",e).eq("is_active",!0).single();if(s||!t||!await i(r,t.password_hash))return null;await n.from("admin_users").update({last_login:new Date().toISOString()}).eq("id",t.id);let{password_hash:o,...a}=t;return a}catch(e){return console.error("Authentication error:",e),null}}async function c(e,r,t,s=null,o=null,a=null){try{await n.from("activity_logs").insert({admin_id:e,action:r,table_name:t,record_id:s,old_values:o,new_values:a})}catch(e){console.error("Activity log error:",e)}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972,3974,2023],()=>t(53489));module.exports=s})();