"use strict";(()=>{var e={};e.id=5578,e.ids=[5578],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},10042:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>p});var a={};t.r(a),t.d(a,{DELETE:()=>d,PUT:()=>m});var s=t(49303),o=t(88716),n=t(60670),i=t(87070),u=t(3360);async function m(e,{params:r}){try{let t=e.cookies.get("admin_session")?.value;if(!t)return i.NextResponse.json({error:"Unauthorized"},{status:401});let a=JSON.parse(Buffer.from(t,"base64").toString()),{id:s}=r,{name:o,position:n,department:m,hierarchy:d,avatar_emoji:l,bio:c,is_active:p,is_featured:f}=await e.json(),{data:g}=await u.pR.from("team_members").select("*").eq("id",s).single(),{data:x,error:_}=await u.pR.from("team_members").update({name:o,position:n,department:m,hierarchy:d,hierarchy_order:{Organizers:1,Directors:2,"Co-Directors":3,Supervisors:4,Leads:5,"Team Members":6,Volunteers:7}[d]||6,avatar_emoji:l,bio:c,is_active:p,is_featured:f}).eq("id",s).select().single();if(_)return console.error("Error updating team member:",_),i.NextResponse.json({error:"Failed to update team member"},{status:500});return await (0,u.ag)(a.id,"UPDATE","team_members",s,g,x),i.NextResponse.json({success:!0,member:x})}catch(e){return console.error("Update team member error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}async function d(e,{params:r}){try{let t=e.cookies.get("admin_session")?.value;if(!t)return i.NextResponse.json({error:"Unauthorized"},{status:401});let a=JSON.parse(Buffer.from(t,"base64").toString()),{id:s}=r,{data:o}=await u.pR.from("team_members").select("*").eq("id",s).single(),{error:n}=await u.pR.from("team_members").delete().eq("id",s);if(n)return console.error("Error deleting team member:",n),i.NextResponse.json({error:"Failed to delete team member"},{status:500});return await (0,u.ag)(a.id,"DELETE","team_members",s,o,null),i.NextResponse.json({success:!0,message:"Team member deleted successfully"})}catch(e){return console.error("Delete team member error:",e),i.NextResponse.json({error:"An error occurred"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/admin/team/[id]/route",pathname:"/api/admin/team/[id]",filename:"route",bundlePath:"app/api/admin/team/[id]/route"},resolvedPagePath:"/Users/macbookpro/Personal Work/tecverse03/app/api/admin/team/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:f}=l,g="/api/admin/team/[id]/route";function x(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:p})}},3360:(e,r,t)=>{t.d(r,{ag:()=>m,pR:()=>n,v9:()=>u});var a=t(43974),s=t(42023);let o=process.env.SUPABASE_SERVICE_ROLE_KEY,n=(0,a.eI)("https://xplcgqfweqzliiwchmqw.supabase.co",o);async function i(e,r){return s.compare(e,r)}async function u(e,r){try{let{data:t,error:a}=await n.from("admin_users").select("*").eq("email",e).eq("is_active",!0).single();if(a||!t||!await i(r,t.password_hash))return null;await n.from("admin_users").update({last_login:new Date().toISOString()}).eq("id",t.id);let{password_hash:s,...o}=t;return o}catch(e){return console.error("Authentication error:",e),null}}async function m(e,r,t,a=null,s=null,o=null){try{await n.from("activity_logs").insert({admin_id:e,action:r,table_name:t,record_id:a,old_values:s,new_values:o})}catch(e){console.error("Activity log error:",e)}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[8948,5972,3974,2023],()=>t(10042));module.exports=a})();