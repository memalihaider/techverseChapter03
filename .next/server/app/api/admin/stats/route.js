"use strict";(()=>{var e={};e.id=6553,e.ids=[6553],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},88305:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var a={};r.r(a),r.d(a,{GET:()=>u});var s=r(49303),i=r(88716),o=r(60670),n=r(87070),l=r(3360);async function u(e){try{if(!e.cookies.get("admin_session")?.value)return n.NextResponse.json({error:"Unauthorized"},{status:401});let{data:t}=await l.pR.from("registrations").select("status"),r={total:t?.length||0,pending:t?.filter(e=>"pending"===e.status).length||0,approved:t?.filter(e=>"approved"===e.status).length||0,rejected:t?.filter(e=>"rejected"===e.status).length||0},{data:a}=await l.pR.from("sponsors").select("tier, is_active").eq("is_active",!0),s={total:a?.length||0,platinum:a?.filter(e=>"Platinum"===e.tier).length||0,gold:a?.filter(e=>"Gold"===e.tier).length||0,silver:a?.filter(e=>"Silver"===e.tier).length||0},{data:i}=await l.pR.from("team_members").select("is_featured, is_active").eq("is_active",!0),o={total:i?.length||0,featured:i?.filter(e=>e.is_featured).length||0},{data:u}=await l.pR.from("event_highlights").select("media_type, is_active").eq("is_active",!0),p={total:u?.length||0,images:u?.filter(e=>"image"===e.media_type).length||0,videos:u?.filter(e=>"video"===e.media_type||"youtube"===e.media_type).length||0};return n.NextResponse.json({success:!0,stats:{registrations:r,sponsors:s,team:o,highlights:p}})}catch(e){return console.error("Stats error:",e),n.NextResponse.json({error:"Failed to fetch stats"},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/stats/route",pathname:"/api/admin/stats",filename:"route",bundlePath:"app/api/admin/stats/route"},resolvedPagePath:"/Users/macbookpro/Personal Work/tecverse03/app/api/admin/stats/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:m}=p,g="/api/admin/stats/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},3360:(e,t,r)=>{r.d(t,{ag:()=>u,pR:()=>o,v9:()=>l});var a=r(43974),s=r(42023);let i=process.env.SUPABASE_SERVICE_ROLE_KEY,o=(0,a.eI)("https://xplcgqfweqzliiwchmqw.supabase.co",i);async function n(e,t){return s.compare(e,t)}async function l(e,t){try{let{data:r,error:a}=await o.from("admin_users").select("*").eq("email",e).eq("is_active",!0).single();if(a||!r||!await n(t,r.password_hash))return null;await o.from("admin_users").update({last_login:new Date().toISOString()}).eq("id",r.id);let{password_hash:s,...i}=r;return i}catch(e){return console.error("Authentication error:",e),null}}async function u(e,t,r,a=null,s=null,i=null){try{await o.from("activity_logs").insert({admin_id:e,action:t,table_name:r,record_id:a,old_values:s,new_values:i})}catch(e){console.error("Activity log error:",e)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972,3974,2023],()=>r(88305));module.exports=a})();