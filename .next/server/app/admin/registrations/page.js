(()=>{var e={};e.id=5438,e.ids=[5438],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},73140:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),s(88394),s(90596),s(72222),s(35866);var a=s(23191),r=s(88716),i=s(37922),l=s.n(i),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o=["",{children:["admin",{children:["registrations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,88394)),"/Users/macbookpro/Personal Work/tecverse03/app/admin/registrations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,90596)),"/Users/macbookpro/Personal Work/tecverse03/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,72222)),"/Users/macbookpro/Personal Work/tecverse03/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/macbookpro/Personal Work/tecverse03/app/admin/registrations/page.tsx"],x="/admin/registrations/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/registrations/page",pathname:"/admin/registrations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},36959:(e,t,s)=>{Promise.resolve().then(s.bind(s,89430))},89430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(10326),r=s(17577),i=s(35047);function l(){(0,i.useRouter)();let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[n,d]=(0,r.useState)("all"),[o,c]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),g=async()=>{try{let e="all"===n?"/api/admin/registrations":`/api/admin/registrations?status=${n}`,s=await fetch(e),a=await s.json();t(a.registrations||[])}catch(e){console.error("Error fetching registrations:",e)}finally{l(!1)}},u=async e=>{if(confirm("Are you sure you want to approve this registration?")){h(!0);try{(await fetch(`/api/admin/registrations/${e}/approve`,{method:"POST"})).ok?(alert("Registration approved! Approval email sent."),g(),m(!1)):alert("Failed to approve registration")}catch(e){console.error("Error approving registration:",e),alert("Error approving registration")}finally{h(!1)}}},y=async e=>{let t=prompt("Please provide a reason for rejection:");if(t){h(!0);try{(await fetch(`/api/admin/registrations/${e}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})})).ok?(alert("Registration rejected! Rejection email sent."),g(),m(!1)):alert("Failed to reject registration")}catch(e){console.error("Error rejecting registration:",e),alert("Error rejecting registration")}finally{h(!1)}}},j=async e=>{if(confirm("Are you sure you want to delete this registration? This action cannot be undone.")){h(!0);try{(await fetch(`/api/admin/registrations/${e}`,{method:"DELETE"})).ok?(alert("Registration deleted successfully"),g(),m(!1)):alert("Failed to delete registration")}catch(e){console.error("Error deleting registration:",e),alert("Error deleting registration")}finally{h(!1)}}},f=e=>{let t={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return t[e]||t.pending},b=e=>{let t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return t[e]||t.pending};return(0,a.jsxs)("div",{children:[a.jsx("div",{className:"mb-8 flex justify-between items-center",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-navy-800 mb-2",children:"Registrations"}),a.jsx("p",{className:"text-gray-600",children:"Manage team registrations and approvals"})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:a.jsx("div",{className:"flex flex-wrap gap-3",children:["all","pending","approved","rejected"].map(e=>a.jsx("button",{onClick:()=>d(e),className:`px-6 py-2 rounded-lg font-medium transition-all ${n===e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),a.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:s?a.jsx("div",{className:"text-center py-12",children:"Loading registrations..."}):0===e.length?a.jsx("div",{className:"text-center py-12 text-gray-500",children:"No registrations found"}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reg. No"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Team Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leader"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Module"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Team Size"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.registration_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.team_name}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[a.jsx("div",{children:e.team_leader_name}),a.jsx("div",{className:"text-xs text-gray-500",children:e.team_leader_email})]}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.primary_module}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.team_size}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${b(e.payment_status)}`,children:e.payment_status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${f(e.status)}`,children:e.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("button",{onClick:()=>{c(e),m(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Details"})})]},e.id))})]})})}),x&&o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-t-2xl",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:o.team_name}),a.jsx("p",{className:"text-blue-100",children:o.registration_number})]}),a.jsx("button",{onClick:()=>m(!1),className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Team Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Team Leader"}),a.jsx("div",{className:"font-medium",children:o.team_leader_name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("div",{className:"font-medium",children:o.team_leader_email})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Phone"}),a.jsx("div",{className:"font-medium",children:o.team_leader_phone})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Institution"}),a.jsx("div",{className:"font-medium",children:o.institution})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Primary Module"}),a.jsx("div",{className:"font-medium",children:o.primary_module})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Team Size"}),a.jsx("div",{className:"font-medium",children:o.team_size})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Team Members"}),a.jsx("div",{className:"space-y-2",children:o.team_members&&o.team_members.length>0?o.team_members.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email," • ",e.role]})]},t)):a.jsx("p",{className:"text-gray-500",children:"No additional members"})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Payment Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Payment Status"}),a.jsx("div",{children:a.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${b(o.payment_status)}`,children:o.payment_status})})]}),o.payment_proof_url&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Payment Proof"}),a.jsx("div",{children:a.jsx("a",{href:o.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Payment Proof →"})})]})]})]}),o.certificate_id&&(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Certificate Information"}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"font-medium text-green-800",children:["Certificate ID: ",o.certificate_id]})})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:["pending"===o.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>u(o.id),disabled:p,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium disabled:opacity-50",children:p?"Processing...":"✓ Approve"}),a.jsx("button",{onClick:()=>y(o.id),disabled:p,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50",children:p?"Processing...":"✗ Reject"})]}),a.jsx("button",{onClick:()=>j(o.id),disabled:p,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium disabled:opacity-50",children:"\uD83D\uDDD1️ Delete"})]})]})]})]})})]})}},88394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/macbookpro/Personal Work/tecverse03/app/admin/registrations/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,1372,4460],()=>s(73140));module.exports=a})();