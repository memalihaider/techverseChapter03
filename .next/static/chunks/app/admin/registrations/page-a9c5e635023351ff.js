(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{266:function(e,t,s){Promise.resolve().then(s.bind(s,2135))},2135:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),r=s(2265),i=s(9376);function l(){(0,i.useRouter)();let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[n,d]=(0,r.useState)("all"),[c,o]=(0,r.useState)(null),[x,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{g()},[n]);let g=async()=>{try{let e=await fetch("all"===n?"/api/admin/registrations":"/api/admin/registrations?status=".concat(n)),s=await e.json();t(s.registrations||[])}catch(e){console.error("Error fetching registrations:",e)}finally{l(!1)}},u=async e=>{if(confirm("Are you sure you want to approve this registration?")){p(!0);try{(await fetch("/api/admin/registrations/".concat(e,"/approve"),{method:"POST"})).ok?(alert("Registration approved! Approval email sent."),g(),m(!1)):alert("Failed to approve registration")}catch(e){console.error("Error approving registration:",e),alert("Error approving registration")}finally{p(!1)}}},y=async e=>{let t=prompt("Please provide a reason for rejection:");if(t){p(!0);try{(await fetch("/api/admin/registrations/".concat(e,"/reject"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})})).ok?(alert("Registration rejected! Rejection email sent."),g(),m(!1)):alert("Failed to reject registration")}catch(e){console.error("Error rejecting registration:",e),alert("Error rejecting registration")}finally{p(!1)}}},f=async e=>{if(confirm("Are you sure you want to delete this registration? This action cannot be undone.")){p(!0);try{(await fetch("/api/admin/registrations/".concat(e),{method:"DELETE"})).ok?(alert("Registration deleted successfully"),g(),m(!1)):alert("Failed to delete registration")}catch(e){console.error("Error deleting registration:",e),alert("Error deleting registration")}finally{p(!1)}}},j=e=>{let t={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return t[e]||t.pending},b=e=>{let t={pending:"bg-yellow-100 text-yellow-800",verified:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return t[e]||t.pending};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-8 flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-navy-800 mb-2",children:"Registrations"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage team registrations and approvals"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:["all","pending","approved","rejected"].map(e=>(0,a.jsx)("button",{onClick:()=>d(e),className:"px-6 py-2 rounded-lg font-medium transition-all ".concat(n===e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:s?(0,a.jsx)("div",{className:"text-center py-12",children:"Loading registrations..."}):0===e.length?(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No registrations found"}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reg. No"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Team Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Leader"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Module"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Team Size"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.registration_number}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.team_name}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,a.jsx)("div",{children:e.team_leader_name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.team_leader_email})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.primary_module}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.team_size}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(b(e.payment_status)),children:e.payment_status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(j(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsx)("button",{onClick:()=>{o(e),m(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Details"})})]},e.id))})]})})}),x&&c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"sticky top-0 bg-gradient-to-r from-blue-500 to-purple-500 text-white p-6 rounded-t-2xl",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:c.team_name}),(0,a.jsx)("p",{className:"text-blue-100",children:c.registration_number})]}),(0,a.jsx)("button",{onClick:()=>m(!1),className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Team Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Team Leader"}),(0,a.jsx)("div",{className:"font-medium",children:c.team_leader_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Email"}),(0,a.jsx)("div",{className:"font-medium",children:c.team_leader_email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Phone"}),(0,a.jsx)("div",{className:"font-medium",children:c.team_leader_phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Institution"}),(0,a.jsx)("div",{className:"font-medium",children:c.institution})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Primary Module"}),(0,a.jsx)("div",{className:"font-medium",children:c.primary_module})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Team Size"}),(0,a.jsx)("div",{className:"font-medium",children:c.team_size})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Team Members"}),(0,a.jsx)("div",{className:"space-y-2",children:c.team_members&&c.team_members.length>0?c.team_members.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email," • ",e.role]})]},t)):(0,a.jsx)("p",{className:"text-gray-500",children:"No additional members"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Payment Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Payment Status"}),(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-sm font-semibold rounded-full ".concat(b(c.payment_status)),children:c.payment_status})})]}),c.payment_proof_url&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Payment Proof"}),(0,a.jsx)("div",{children:(0,a.jsx)("a",{href:c.payment_proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Payment Proof →"})})]})]})]}),c.certificate_id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Certificate Information"}),(0,a.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"font-medium text-green-800",children:["Certificate ID: ",c.certificate_id]})})]}),(0,a.jsxs)("div",{className:"border-t pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-navy-800 mb-4",children:"Actions"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:["pending"===c.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>u(c.id),disabled:h,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium disabled:opacity-50",children:h?"Processing...":"✓ Approve"}),(0,a.jsx)("button",{onClick:()=>y(c.id),disabled:h,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50",children:h?"Processing...":"✗ Reject"})]}),(0,a.jsx)("button",{onClick:()=>f(c.id),disabled:h,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium disabled:opacity-50",children:"\uD83D\uDDD1️ Delete"})]})]})]})]})})]})}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=266)}),_N_E=e.O()}]);